<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>MaxGames - Home</title>
<style>
  body {
    margin: 0;
    font-family: 'Verdana', sans-serif;
    background: linear-gradient(135deg, #1a1a1a, #0f0f0f);
    color: #fff;
    display: flex;
    flex-direction: column;
    align-items: center;
    justify-content: center;
    min-height: 100vh;
  }

  h1 {
    font-size: 3em;
    margin-bottom: 40px;
    text-shadow: 2px 2px #ff00ff;
  }

  button {
    background: linear-gradient(45deg, #ff00ff, #00ffff);
    border: none;
    color: white;
    padding: 15px 35px;
    font-size: 1.2em;
    margin: 10px;
    border-radius: 15px;
    cursor: pointer;
    transition: transform 0.2s, box-shadow 0.2s;
  }

  button:hover {
    transform: scale(1.1);
    box-shadow: 0 0 20px #00ffff;
  }

  #status, #gamesList {
    margin-top: 30px;
    font-size: 1.1em;
    text-align: center;
    max-width: 90%;
  }

  #gamesList button {
    display: block;
    margin: 5px auto;
    width: 60%;
  }
</style>
</head>
<body>
<h1>ðŸŽ® MaxGames ðŸŽ®</h1>

<button id="createGameBtn">Create New Game</button>
<button id="seeGamesBtn">See Other Games</button>
<button id="oldVersionBtn">Old Version</button>

<div id="status"></div>
<div id="gamesList"></div>

<!-- Firebase Scripts -->
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/9.24.0/firebase-firestore-compat.js"></script>

<script>
  // --- Firebase Config ---
  const firebaseConfig = {
    apiKey: "AIzaSyCszc2NdA7hFwl8pWq8nBH9eelPWw2h8Hw",
    authDomain: "maxgames-cf103.firebaseapp.com",
    projectId: "maxgames-cf103",
    storageBucket: "maxgames-cf103.firebasestorage.app",
    messagingSenderId: "411242291332",
    appId: "1:411242291332:web:3665dff46f9dc11434a2d1",
    measurementId: "G-W4Q5XH3YQ6"
  };

  // --- Initialize Firebase ---
  const app = firebase.initializeApp(firebaseConfig);
  const db = firebase.firestore();

  // --- Buttons ---
  const createGameBtn = document.getElementById("createGameBtn");
  const seeGamesBtn = document.getElementById("seeGamesBtn");
  const oldVersionBtn = document.getElementById("oldVersionBtn");
  const statusDiv = document.getElementById("status");
  const gamesListDiv = document.getElementById("gamesList");

  // --- Create Game ---
  createGameBtn.addEventListener("click", async () => {
    try {
      const newGameRef = db.collection("games").doc();
      await newGameRef.set({
        createdAt: new Date(),
        title: "Untitled Game",
        objects: []
      });
      statusDiv.innerHTML = `âœ… Game created! ID: <b>${newGameRef.id}</b>`;
    } catch (err) {
      console.error(err);
      statusDiv.textContent = "âŒ Error creating game.";
    }
  });

  // --- See Other Games (made by people) ---
  seeGamesBtn.addEventListener("click", async () => {
    gamesListDiv.innerHTML = "<b>Loading games...</b>";
    try {
      const snapshot = await db.collection("games").orderBy("createdAt", "desc").get();
      if (snapshot.empty) {
        gamesListDiv.innerHTML = "No games found!";
        return;
      }
      gamesListDiv.innerHTML = "";
      snapshot.forEach(doc => {
        const btn = document.createElement("button");
        btn.textContent = doc.data().title + " (ID: " + doc.id + ")";
        btn.onclick = () => alert("You clicked game ID: " + doc.id);
        gamesListDiv.appendChild(btn);
      });
    } catch (err) {
      console.error(err);
      gamesListDiv.innerHTML = "Error loading games.";
    }
  });

  // --- Old Version ---
  oldVersionBtn.addEventListener("click", () => {
    window.location.href = "index2.html";
  });
</script>
</body>
</html>
