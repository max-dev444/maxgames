<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Snazz Chat</title>
<style>
body {
    margin:0;
    font-family:Arial,sans-serif;
    background:#111;
    color:white;
    display:flex;
    justify-content:center;
    align-items:center;
    height:100vh;
}
#app {
    width:90%;
    max-width:600px;
    height:90%;
    border:2px solid #ff4444;
    border-radius:10px;
    background:#222;
    display:flex;
    flex-direction:column;
    overflow:hidden;
}
#header {
    padding:10px;
    background:#333;
    display:flex;
    justify-content:space-between;
    align-items:center;
}
#chatWindow {
    flex:1;
    padding:10px;
    overflow-y:auto;
    background:#111;
}
#inputArea {
    display:flex;
    border-top:1px solid #444;
}
#messageInput {
    flex:1;
    padding:10px;
    border:none;
    font-size:1em;
    background:#222;
    color:white;
}
#sendBtn {
    padding:10px 20px;
    background:#ff4444;
    border:none;
    color:black;
    cursor:pointer;
}
</style>
</head>
<body>
<div id="app">
    <div id="header">
        <h1>Snazz</h1>
        <div id="userDisplay"></div>
    </div>
    <div id="chatWindow"></div>
    <div id="inputArea">
        <input type="text" id="messageInput" placeholder="Type a message...">
        <button id="sendBtn">Send</button>
    </div>
</div>

<!-- Firebase JS SDK -->
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-app-compat.js"></script>
<script src="https://www.gstatic.com/firebasejs/10.12.0/firebase-database-compat.js"></script>

<script>
const firebaseConfig = {
  apiKey: "AIzaSyCunOLnr6cDGJ-2ocqM_jnVwbcTLioq5Hk",
  authDomain: "snazz-26b11.firebaseapp.com",
  databaseURL: "https://snazz-26b11-default-rtdb.firebaseio.com",
  projectId: "snazz-26b11",
  storageBucket: "snazz-26b11.firebasestorage.app",
  messagingSenderId: "849482661558",
  appId: "1:849482661558:web:0a1f0ef330e692827c3017"
};
firebase.initializeApp(firebaseConfig);
const db = firebase.database();
const messagesRef = db.ref("snazz/messages");

// Guest username
let username = "Guest" + Math.floor(Math.random()*1000000);
document.getElementById("userDisplay").textContent = username;

// Send message
document.getElementById("sendBtn").addEventListener("click", () => {
    const msg = document.getElementById("messageInput").value.trim();
    if(!msg) return;
    const timestamp = new Date().toLocaleTimeString();
    messagesRef.push({user: username, message: msg, time: timestamp});
    document.getElementById("messageInput").value = "";
});

// Receive messages
messagesRef.on("child_added", snap => {
    const data = snap.val();
    const msgEl = document.createElement("div");
    msgEl.innerHTML = `<strong style="color:#ff4444">${data.user}</strong>: ${data.message} <span style="font-size:0.7em;color:#888">${data.time}</span>`;
    document.getElementById("chatWindow").appendChild(msgEl);
    document.getElementById("chatWindow").scrollTop = document.getElementById("chatWindow").scrollHeight;
});
</script>
</body>
</html>
