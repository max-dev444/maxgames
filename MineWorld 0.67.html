<!DOCTYPE html>
<!-- Mineworld FINAL FIX: proper UI states + REAL names -->
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Mineworld</title>
<style>
body{margin:0;font-family:Arial;background:#0f0f0f;color:#eee;display:flex;height:100vh}
#game{flex:1;display:flex;flex-direction:column;padding:10px}
#topbar{display:flex;justify-content:space-between;align-items:center;margin-bottom:8px}
#money{font-size:18px;font-weight:bold}
#gridWrap{flex:1;overflow:auto;border:2px solid #333;padding:6px}
.grid{display:grid;gap:2px}
.cell{width:16px;height:16px;background:#7a4a1e;cursor:pointer}
.cell.mined{background:#2a2a2a}
#side{width:360px;background:#161616;padding:8px;overflow:auto}
h3{margin:6px 0}
button{width:100%;margin:2px 0;padding:6px;background:#222;color:#eee;border:1px solid #444;cursor:pointer}
button:hover{background:#333}
button.bought{background:#eee;color:#000}
button.equipped{background:#00ff55;color:#000;font-weight:bold}
.panel{border:1px solid #333;padding:4px;margin-bottom:6px}
.small{font-size:12px;color:#aaa}
</style>
</head>
<body>
<div id="game">
 <div id="topbar">
  <div id="money"></div>
  <div class="small">Mineworld</div>
 </div>
 <div id="gridWrap"><div id="grid" class="grid"></div></div>
</div>
<div id="side">
 <div class="panel"><h3>Pickaxes</h3><div id="pickaxes"></div></div>
 <div class="panel"><h3>Upgrades</h3><div id="upgrades"></div></div>
 <div class="panel"><h3>Rebirth</h3><button onclick="rebirth()">Rebirth</button></div>
 <div class="panel"><h3>Collection</h3><div id="collection"></div></div>
 <div class="panel"><h3>Admin</h3><button onclick="admin()">Admin Panel</button></div>
</div>
<script>
// ---------- FORMAT ----------
const ABBR=[['VG',1e63],['NNDC',1e60],['OCDC',1e57],['SPDC',1e54],['SXDC',1e51],['QUDC',1e48],['QADC',1e45],['TDC',1e42],['DDC',1e39],['UDC',1e36],['DC',1e33],['NN',1e30],['OC',1e27],['SP',1e24],['SX',1e21],['QU',1e18],['QA',1e15],['T',1e12],['B',1e9],['M',1e6]];
function fmt(n){for(const[a,v]of ABBR)if(n>=v)return(n/v).toFixed(2)+a;return n.toFixed(2)}

// ---------- STATE ----------
let money=0,rebirths=0,rebirthCoins=0;
let gridSize=16,grids=1,dropsPerGrid=1;
let permMM=1,permLuck=1;
let pickaxe={mm:1,luck:1,index:-1};
let ownedPickaxes=new Set();
let collection={};
let mouseDown=false;

// ---------- DROPS (REAL NAMES, 40+) ----------
const drops=[
 {n:'Dirt Crumb',c:0.30,v:0.01},
 {n:'Packed Dirt',c:0.20,v:0.1},
 {n:'Stone Chip',c:0.15,v:1},
 {n:'Coal Fleck',c:0.10,v:5},
 {n:'Copper Shard',c:0.07,v:20},
 {n:'Iron Fragment',c:0.05,v:75},
 {n:'Silver Grain',c:0.035,v:250},
 {n:'Gold Speck',c:0.025,v:800},
 {n:'Platinum Dust',c:0.018,v:3e3},
 {n:'Titanium Flake',c:0.012,v:1.2e4},
 {n:'Diamond Dust',c:0.008,v:5e4},
 {n:'Refined Diamond',c:0.005,v:2e5},
 {n:'Obsidian Sliver',c:0.0035,v:9e5},
 {n:'Void Ash',c:0.0025,v:4e6},
 {n:'Void Crystal',c:0.0018,v:1.8e7},
 {n:'Netherite Shard',c:0.0012,v:7e7},
 {n:'Netherite Core',c:0.0008,v:3e8},
 {n:'Elysium Fragment',c:0.0005,v:1.5e9},
 {n:'Elysium Crystal',c:0.0003,v:7e9},
 {n:'Chrono Alloy',c:0.0002,v:3e10},
 {n:'Temporal Core',c:0.00012,v:1.2e11},
 {n:'Reality Shard',c:0.00006,v:5e11},
 {n:'Thread of Reality',c:0.00003,v:2e12},
 {n:'Gram of Reality',c:1e-12,v:1e11}
];

// ---------- PICKAXES (REAL NAMES, 30+) ----------
const pickaxes=[
 ['Twig Pickaxe',1,1.05,1.05],
 ['Wooden Pickaxe',10,1.2,1.1],
 ['Reinforced Wood Pickaxe',75,1.5,1.3],
 ['Stone Pickaxe',400,2,1.6],
 ['Coal Pickaxe',2e3,3,2],
 ['Iron Pickaxe',1e4,5,3],
 ['Steel Pickaxe',6e4,9,4.5],
 ['Titanium Pickaxe',3e5,16,7],
 ['Diamond Pickaxe',2e6,30,12],
 ['Flawless Diamond Pickaxe',1.2e7,55,20],
 ['Obsidian Pickaxe',6e7,90,35],
 ['Void-Touched Pickaxe',3e8,150,60],
 ['Netherite Pickaxe',2e9,260,120],
 ['Netherite Prime Pickaxe',1e10,450,240],
 ['Elysium Pickaxe',8e10,800,600],
 ['Ascended Elysium Pickaxe',6e11,1400,1200],
 ['Chrono Pickaxe',4e12,2500,2500],
 ['Reality Splitter Pickaxe',3e13,5000,5000],
 ['Reality Breaker Pickaxe',2e14,12000,12000],
 ['Absolute Pickaxe',1e15,30000,30000]
];

// ---------- GRID ----------
const gridEl=document.getElementById('grid');
function buildGrid(){
 gridEl.innerHTML='';
 gridEl.style.gridTemplateColumns=`repeat(${gridSize},16px)`;
 for(let i=0;i<gridSize*gridSize;i++){
  const c=document.createElement('div');
  c.className='cell';
  c.onmousedown=()=>{mouseDown=true;mine(c)};
  c.onmouseenter=()=>{if(mouseDown)mine(c)};
  gridEl.appendChild(c);
 }
}
document.body.onmouseup=()=>mouseDown=false;

function mine(cell){
 if(cell.classList.contains('mined'))return;
 cell.classList.add('mined');
 setTimeout(()=>cell.classList.remove('mined'),750);
 for(let g=0;g<grids;g++)for(let r=0;r<dropsPerGrid;r++)roll();
 update();
}

function roll(){
 let luck=pickaxe.luck*permLuck;
 let t=Math.random(),sum=0;
 for(const d of drops){sum+=d.c/luck;if(t<sum){gain(d);break;}}
}

function gain(d){
 let g=d.v*pickaxe.mm*permMM;
 money+=g; collection[d.n]=(collection[d.n]||0)+1;
}

// ---------- UI ----------
function update(){
 document.getElementById('money').textContent=`$ ${fmt(money)} | RC: ${fmt(rebirthCoins)}`;
 let col=''; for(const k in collection)col+=`${k} Ã—${collection[k]}<br>`;
 document.getElementById('collection').innerHTML=col;
}

// ---------- PICKAXE SHOP ----------
const pEl=document.getElementById('pickaxes');
pickaxes.forEach((p,i)=>{
 let b=document.createElement('button');
 b.textContent=`${p[0]} ($${fmt(p[1])})`;
 b.onclick=()=>{
  if(!ownedPickaxes.has(i)){
   if(money<p[1])return;
   money-=p[1]; ownedPickaxes.add(i); b.classList.add('bought');
  }
  document.querySelectorAll('#pickaxes button').forEach(x=>x.classList.remove('equipped'));
  pickaxe={mm:p[2],luck:p[3],index:i}; b.classList.add('equipped'); update();
 };
 pEl.appendChild(b);
});

// ---------- REBIRTH ----------
function rebirth(){
 let cost=1e6*Math.pow(2,rebirths);
 if(money<cost)return;
 money=0; rebirths++; rebirthCoins+=2;
 permMM*=2; permLuck*=2;
 gridSize=16; grids=1; dropsPerGrid=1;
 ownedPickaxes.clear(); pickaxe={mm:1,luck:1,index:-1};
 document.querySelectorAll('#pickaxes button').forEach(b=>b.className='');
 buildGrid(); update();
}

// ---------- ADMIN ----------
function admin(){
 let m=prompt('Money'); if(m!==null)money=+m;
 let r=prompt('Rebirth Coins'); if(r!==null)rebirthCoins=+r;
 update();
}

buildGrid(); update();
</script>
</body>
</html>