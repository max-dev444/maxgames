<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Mlooket Studio</title>
<style>
body{
  margin:0;
  background:linear-gradient(120deg,#050510,#0a0a25,#02010a);
  color:white;
  font-family:Arial;
  display:flex;
  height:100vh;
}
#maker,#player{
  flex:1;
  padding:15px;
  overflow:auto;
}
h1{color:#7df;text-align:center;text-shadow:0 0 10px #3cf;}

.panel{
  background:rgba(0,0,0,.65);
  padding:12px;
  border-radius:12px;
  box-shadow:0 0 20px #000;
  margin-bottom:12px;
}

input,textarea,select{
  width:100%;
  padding:8px;
  margin:4px 0;
  background:#0b0b18;
  color:white;
  border:1px solid #345;
  border-radius:6px;
}

button{
  background:linear-gradient(90deg,#0af,#05f);
  border:none;
  padding:8px;
  margin:3px 0;
  width:100%;
  color:white;
  border-radius:8px;
  cursor:pointer;
  box-shadow:0 0 10px #09f;
}
button:hover{filter:brightness(1.3);}

.smallBtn{
  width:48%;
  display:inline-block;
}

.quizCard,.questionCard{
  background:#101030;
  border-radius:8px;
  padding:8px;
  margin:5px 0;
  cursor:pointer;
}
.quizCard:hover,.questionCard:hover{background:#1b1b44;}
.active{background:#255!important;}
.answerBtn{background:#1a1a44;}
.answerBtn:hover{background:#2a2a66;}
</style>
</head>
<body>

<div id="maker">
<h1>ğŸ§  Mlooket Studio</h1>

<div class="panel">
<input id="quizName" placeholder="Quiz name">
<div id="qCount">0 questions</div>
<button onclick="newQuiz()">ğŸ§¹ New Quiz</button>
</div>

<div class="panel">
<textarea id="question" placeholder="Question"></textarea>
<input id="a1" placeholder="Answer 1">
<input id="a2" placeholder="Answer 2">
<input id="a3" placeholder="Answer 3">
<input id="a4" placeholder="Answer 4">
<select id="correct">
<option value="0">Answer 1 is correct</option>
<option value="1">Answer 2 is correct</option>
<option value="2">Answer 3 is correct</option>
<option value="3">Answer 4 is correct</option>
</select>
<button onclick="saveQuestion()">ğŸ’¾ Save / Update Question</button>
<button onclick="duplicate()">ğŸ“„ Duplicate</button>
<button onclick="deleteQuestion()">ğŸ—‘ Delete</button>
<div>
<button class="smallBtn" onclick="move(-1)">â¬† Move Up</button>
<button class="smallBtn" onclick="move(1)">â¬‡ Move Down</button>
</div>
</div>

<div class="panel">
<h3>Questions</h3>
<div id="questionList"></div>
</div>

<div class="panel">
<button onclick="saveQuiz()">ğŸ“¦ Save Quiz</button>
<button onclick="exportQuiz()">ğŸ“¤ Export</button>
<button onclick="importQuiz()">ğŸ“¥ Import</button>
<button onclick="preview()">ğŸ‘ Preview</button>
</div>

<div class="panel">
<h3>Your Quizzes</h3>
<div id="quizList"></div>
</div>
</div>

<div id="player">
<h1>ğŸ® Mlooket Play</h1>
<div class="panel" id="playArea">Select a quiz.</div>
</div>

<script>
let quizzes=JSON.parse(localStorage.getItem("mlooket"))||{}
let current=[]
let selected=-1

function updateCount(){qCount.innerText=current.length+" questions"}

function newQuiz(){
current=[];selected=-1;quizName.value="";renderQuestions()
}

function saveQuestion(){
let q=question.value,a=[a1.value,a2.value,a3.value,a4.value],c=correct.value
if(!q||a.includes(""))return alert("Fill all")
if(selected==-1) current.push({q,a,c})
else current[selected]={q,a,c}
renderQuestions()
}

function renderQuestions(){
questionList.innerHTML=""
current.forEach((x,i)=>{
let d=document.createElement("div")
d.className="questionCard"+(i==selected?" active":"")
d.innerText=(i+1)+". "+x.q
d.onclick=()=>loadQ(i)
questionList.appendChild(d)
})
updateCount()
}

function loadQ(i){
selected=i
let x=current[i]
question.value=x.q
a1.value=x.a[0];a2.value=x.a[1];a3.value=x.a[2];a4.value=x.a[3]
correct.value=x.c
renderQuestions()
}

function deleteQuestion(){
if(selected==-1)return
current.splice(selected,1)
selected=-1
renderQuestions()
}

function duplicate(){
if(selected==-1)return
current.push(JSON.parse(JSON.stringify(current[selected])))
renderQuestions()
}

function move(d){
if(selected<0)return
let n=selected+d
if(n<0||n>=current.length)return
[current[selected],current[n]]=[current[n],current[selected]]
selected=n
renderQuestions()
}

function saveQuiz(){
let name=quizName.value
if(!name||current.length==0)return alert("Need name & questions")
quizzes[name]=JSON.parse(JSON.stringify(current))
localStorage.setItem("mlooket",JSON.stringify(quizzes))
updateList()
}

function updateList(){
quizList.innerHTML=""
for(let q in quizzes){
let d=document.createElement("div")
d.className="quizCard"
d.innerText=q+" ("+quizzes[q].length+")"
d.onclick=()=>playQuiz(q)
quizList.appendChild(d)
}
}
updateList()

let playData,i,score

function playQuiz(n){
playData=quizzes[n];i=0;score=0;showQ()
}

function showQ(){
if(i>=playData.length){
playArea.innerHTML=`<h2>Done</h2><p>${score}/${playData.length}</p>`
return
}
let q=playData[i]
let h=`<h2>${q.q}</h2>`
q.a.forEach((a,x)=>h+=`<button class="answerBtn" onclick="ans(${x})">${a}</button>`)
playArea.innerHTML=h
}

function ans(x){
if(x==playData[i].c)score++
i++;showQ()
}

function exportQuiz(){
alert(JSON.stringify(current))
}

function importQuiz(){
let t=prompt("Paste quiz JSON")
try{current=JSON.parse(t);renderQuestions()}catch(e){alert("Invalid")}
}

function preview(){
if(current.length==0)return
playData=current;i=0;score=0;showQ()
}
</script>
</body>
</html>
